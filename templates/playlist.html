<html>

<head>
<title>basement.fm: History</title>
{% include 'common_header.html' %}
</head>

<body>
  <!-- header -->
  {% include 'header.html' %}
  <!-- end of header -->
  
  <div class="container">
    <div class="table-responsive">
      <table class="table table-striped table-condensed table-hover">
	<thead>
	  <tr>
	    <th class="rounded-left">Artist</th>
	  <th>Title</th>
	    <th>Requested By</th>
	    <th>Rating</th>
	    <th class="rounded-right">Avg</th>
	  </tr>
	</thead>
	<tbody>
	  <form id="myForm" method="POST" action="/vote">
	    {% for song in history %}
	    <tr>
	      <td>{{ song['artist'] }}</td>
	      <td>{{ song['title'] }}</td>
	      <td>{{ song['username'] }}</td>
	      <td>
		<input type="number" class="rating" name="{{ song['i_song'] }}" value="{{ song['rating'] }}" data-max="4" data-min="0"/>
	      </td>
	      <td>{{ song['average'] }}/5 ({{ song['votes'] }} votes)<td>
	    </tr>
	    {% endfor %}
	    <tr class="playing">
	      <td>{{ playing['artist'] }}</td>
	      <td>{{ playing['title'] }}</td>
	      <td>{{ playing['username'] }}</td>
	      <td>
		<input type="number" class="rating" name="{{ playing['i_playing'] }}" value="{{ playing['rating'] }}" data-max="4" data-min="0"/>
	      </td>
	      <td>{{ playing['average'] }}/5 ({{ playing['votes'] }} votes)</td>
	    </tr>
	    {% for song in requests %}
	    <tr>
	      <td>{{ song['artist'] }}</td>
	      <td>{{ song['title'] }}</td>
	      <td>{{ song['username'] }}</td>
	      <td>
		<input type="number" class="rating" name="{{ song['i_song'] }}" value="{{ song['rating'] }}" data-max="4" data-min="0"/>
	      </td>
	      <td>{{ song['average'] }}/5 ({{ song['votes'] }} votes)</td>
	    </tr>
	    {% endfor %}
	  </form>
	</tbody>
      </table>
    </div>
  </div>
    
  {% include 'footer.html' %}
</body>

</html>
